<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>Reggae Surprise</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=yes" />
  <link href="https://fonts.googleapis.com/css2?family=Reggae+One&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="style.css" />
</head>
<body>

  <!-- Décor -->
  <div class="background" aria-hidden="true"></div>

  <!-- Navigation -->
  <nav role="navigation" aria-label="Sections">
    <ul>
      <li><a href="#" onclick="showSection('accueil')" class="active">Accueil</a></li>
      <li><a href="#" onclick="showSection('rencontre')">Rencontre</a></li>
      <li><a href="#" onclick="showSection('reseaux')">Réseaux</a></li>
      <li><a href="#" onclick="showSection('concerts')">Concerts</a></li>
      <li><a href="#" onclick="showSection('merch')">Merchandising</a></li>
      <li><a href="#" onclick="showSection('contact')">Contact</a></li>
    </ul>
  </nav>

  <!-- Lecteur Audio -->
  <div class="audio-player" id="audioPlayer">
    <img src="logo-reggae-surprise.png" alt="Logo Reggae Surprise" id="logo" draggable="false" />
    <div id="playButtonOverlay">▶</div>
  </div>
  <audio id="audioElement"></audio>

  <main>
    <!-- ACCUEIL -->
    <section id="accueil" class="active">
      <div class="overlay-content">
        <div class="container">
          <img src="accueil.png?v=1" alt="Photo Accueil" class="photo-accueil" draggable="false" />
        </div>
      </div>
    </section>

    <!-- RENCONTRE -->
    <section id="rencontre">
      <div class="overlay-content">
        <div class="container">
          <h1>Rencontre</h1>
          <img src="photorencontre.jpg" alt="Photo Rencontre" class="photo-rencontre" draggable="false" />
          <p class="rencontre-text">
            Une histoire de passionnés…
            Avant la surprise, il y a eu une rencontre.
            Cinq musiciens aux univers différents,
            réunis par l'amour du groove et du reggae.
          </p>

          <div class="carousel">
            <div class="carousel-content">
              <button class="carousel-btn inside left" aria-label="Précédent" onclick="prevMember()">&#10094;</button>
              <img id="member-photo" src="Keo Vy.jpeg" alt="Membre" draggable="false" />
              <button class="carousel-btn inside right" aria-label="Suivant" onclick="nextMember()">&#10095;</button>
            </div>
            <p id="member-text" class="member-text"></p>
          </div>
        </div>
      </div>
    </section>

    <!-- RÉSEAUX -->
    <section id="reseaux">
      <div class="overlay-content">
        <div class="container">
          <h1>Réseaux</h1>

          <h2 class="net-title">Viens nous écouter sur</h2>
          <div class="social-icons">
            <a href="https://music.apple.com/fr/artist/reggae-surprise/1821732281" target="_blank" rel="noopener" class="icon-frame">
              <img src="apple.png" alt="Apple Music" draggable="false" />
            </a>
            <a href="https://open.spotify.com/intl-fr/artist/5Djx1kAthICTwQu1u6AAhx?si=04DVmS7pROagwVvOh4DR1g" target="_blank" rel="noopener" class="icon-frame">
              <img src="spotify.png" alt="Spotify" class="icon-boost" draggable="false" />
            </a>
          </div>

          <h2 class="net-title">Viens nous voir sur</h2>
          <div class="social-icons">
            <a href="https://www.youtube.com/@ReggaeSurprise" target="_blank" rel="noopener" class="icon-frame">
              <img src="youtube.png" alt="YouTube" draggable="false" />
            </a>
          </div>

          <h2 class="net-title">Viens nous suivre sur</h2>
          <div class="social-icons">
            <a href="https://www.instagram.com/reggaesurpriseoff/" target="_blank" rel="noopener" class="icon-frame">
              <img src="instagram.png" alt="Instagram" draggable="false" />
            </a>
            <a href="https://www.facebook.com/profile.php?id=61567461952336&locale=fr_FR" target="_blank" rel="noopener" class="icon-frame">
              <img src="facebook.png" alt="Facebook" draggable="false" />
            </a>
          </div>
        </div>
      </div>
    </section>

    <!-- CONCERTS -->
    <section id="concerts">
      <div class="overlay-content">
        <div class="container">
          <h1>Programme des concerts</h1>
          <img src="programme-concerts.jpg" alt="Programme des concerts" class="concert-img" id="concertImg" draggable="false" />
        </div>
      </div>
    </section>

    <!-- MERCH -->
    <section id="merch">
      <div class="overlay-content">
        <div class="container">
          <h1>Merchandising</h1>
          <div class="merch-box"><p>À venir</p></div>
        </div>
      </div>
    </section>

    <!-- CONTACT -->
    <section id="contact">
      <div class="overlay-content">
        <div class="container">
          <h1>Contactez-nous</h1>
          <form id="contactForm" action="https://formspree.io/f/YOUR_FORM_ID" method="POST">
            <label for="name">Nom :</label>
            <input type="text" id="name" name="name" required />

            <label for="email">Email :</label>
            <input type="email" id="email" name="_replyto" required />

            <label for="message">Message :</label>
            <textarea id="message" name="message" rows="6" required></textarea>

            <input type="text" name="_gotcha" style="display:none" />
            <input type="hidden" name="_subject" value="Nouveau message via le site Reggae Surprise" />

            <button type="submit">Envoyer</button>
            <p id="formStatus" class="form-status" aria-live="polite"></p>
          </form>
        </div>
      </div>
    </section>
  </main>

  <script>
    // Tout le JS démarre quand le DOM est prêt
    (function(){
      // --- Navigation
      const sections = document.querySelectorAll('section');
      const navLinks = document.querySelectorAll('nav a');
      window.showSection = function(id){
        sections.forEach(sec => sec.classList.remove('active'));
        navLinks.forEach(a => a.classList.remove('active'));
        const target = document.getElementById(id);
        if (target) target.classList.add('active');
        document.querySelectorAll('nav a').forEach(a => {
          if (a.getAttribute('onclick') === `showSection('${id}')`) a.classList.add('active');
        });
        window.scrollTo({ top: 0, behavior: 'smooth' });
      };

      // --- Audio
      const audioFiles = []; for (let i=1;i<=20;i++) audioFiles.push(`audio${i}.mp3`);
      let currentTrack = 0;
      const audio = document.getElementById('audioElement');
      const logo = document.getElementById('logo');
      const playOverlay = document.getElementById('playButtonOverlay');
      let isPlaying = false, firstPlay = true, clickTimeout;

      function playTrack(index){
        audio.src = audioFiles[index];
        audio.play().catch(()=>{});
        isPlaying = true;
        logo.classList.remove('blink');
        logo.classList.add('playing');
        playOverlay.style.display = 'none';
      }
      function pauseTrack(){
        audio.pause();
        isPlaying = false;
        logo.classList.remove('playing');
        logo.classList.add('blink');
        playOverlay.style.display = 'block';
      }
      document.getElementById('audioPlayer').addEventListener('click', () => {
        if (clickTimeout){
          clearTimeout(clickTimeout);
          clickTimeout = null;
          currentTrack = (currentTrack + 1) % audioFiles.length;
          playTrack(currentTrack);
          return;
        }
        clickTimeout = setTimeout(() => {
          if (!isPlaying){
            if (firstPlay){ playTrack(currentTrack); firstPlay = false; }
            else {
              audio.play().then(()=>{
                isPlaying = true;
                logo.classList.remove('blink');
                logo.classList.add('playing');
                playOverlay.style.display = 'none';
              }).catch(()=>{});
            }
          } else {
            pauseTrack();
          }
          clickTimeout = null;
        }, 250);
      });
      audio.addEventListener('ended', ()=> {
        currentTrack = (currentTrack + 1) % audioFiles.length;
        playTrack(currentTrack);
      });
      logo.classList.add('blink');
      playOverlay.style.display = 'block';

      // --- Carrousel
      const members = [
        { photo: "Keo Vy.jpeg", text: "Le battement de cœur de Reggae Surprise. Batteur et percussionniste depuis des années..." },
        { photo: "Thomas.jpeg", text: "Aujourd’hui c’est au tour de Thomas..." },
        { photo: "jeremy.jpeg", text: "Jeremy, comme du rhum dans un cocktail..." },
        { photo: "Antho.jpeg", text: "L’homme à la guitare..." },
        { photo: "Julie.jpeg", text: "Julie, la touche de classique et de folie..." }
      ];
      let currentMember = 0;
      const photoEl = document.getElementById('member-photo');
      const textEl = document.getElementById('member-text');
      function updateMember(){ photoEl.src = members[currentMember].photo; textEl.textContent = members[currentMember].text; }
      window.prevMember = function(){ currentMember=(currentMember-1+members.length)%members.length; updateMember(); }
      window.nextMember = function(){ currentMember=(currentMember+1)%members.length; updateMember(); }
      updateMember();
    })();
  </script>
</body>
</html>
